<!-- Main container for the leaderboard, styled as a "card" -->
<div class="leaderboard-card">

  <!-- Card Header -->
  <div class="card-header">
    <div class="header-content">
      <h2 class="card-title">Vocal Endurance Challenge</h2>
      <p class="card-category">Participant scores are updated after each completed speech assessment.</p>
    </div>
    <div class="info-tooltip">
      <span class="info-icon">ⓘ</span>
      <p class="tooltip-text">Add user name to generate score or manually add the score</p>
    </div>
  </div>

  <!-- Card Body -->
  <div class="card-body">
    <div class="input-section">
      <input
        type="text"
        placeholder="Enter Participant Name"
        [(ngModel)]="newUserName"
        (keyup.enter)="addUser()"
        class="form-control"
      />
      <!-- This button now adds a user with a random score -->
      <button (click)="addUser()" class="btn">Add User</button>
      <!--  This button opens the manual score modal -->
      <button (click)="openModal()" class="btn btn-secondary">Add Score</button>
    </div>

    <!-- Leaderboard Table -->
    <div class="table-responsive">
      <table class="leaderboard-table">
        <thead>
          <tr>
            <!-- Table headers for the leaderboard -->
            <th class="text-center">#</th>
            <th>Participant</th>
            <th class="text-right">Score</th>
            <th class="text-center">Progress</th>
          </tr>
        </thead>
        <tbody>
          <!-- Loop through the leaderboard array and display each user -->
          <tr *ngFor="let user of leaderboard; let i = index" [ngClass]="{'top-performer': i === 0}">
            <td class="text-center">{{ i + 1 }}</td>
            <td>{{ user.name }}</td>
            <td class="text-right">{{ user.score }}</td>
            <td>
              <div class="progress-bar-container">
                <div class="progress-bar" [style.width.%]="user.score / 10"></div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
      <p *ngIf="leaderboard.length === 0" class="empty-message">The leaderboard is empty. Add a participant to get started!</p>

<!-- Achievements Section -->
<div class="achievements-card">
</div>
<!--  Manual Score Modal -->
<!-- The modal overlay, shown only when isModalVisible is true. Clicking the overlay closes the modal. -->
<div *ngIf="isModalVisible" class="modal-overlay" (click)="closeModal()">
  <!-- The modal content box. stopPropagation prevents a click inside from closing the modal. -->
  <div class="modal-content" (click)="$event.stopPropagation()">
    <h3>Add User</h3>
    <!-- Input fields for manual score entry -->
    <div class="form-group">
      <label for="manualName">Participant Name</label>
      <input id="manualName" type="text" [(ngModel)]="newUserName" class="form-control" placeholder="Enter name...">
    </div>
    <div class="form-group">
      <label for="manualScore">Score</label>
      <input id="manualScore" type="number" [(ngModel)]="manualScore" class="form-control" placeholder="Enter score...">
    </div>
    <!-- Modal actions: Cancel and Submit buttons -->
    <div class="modal-actions">
      <button (click)="closeModal()" class="btn btn-secondary">Cancel</button>
      <button (click)="submitManualScore()" class="btn">Submit Score</button>
    </div>
  </div>
</div>
<!--  Achievements Section -->
<div class="achievements-card">
  <div class="card-header">
    <h3 class="card-title">Unlocked Achievements</h3>
  </div>
  <!-- Card Body with Achievements -->
  <div class="card-body achievements-grid">
    <div class="badge">
      <span class="badge-icon">🥇</span>
      <span class="badge-title">On the Board!</span>
      <span class="badge-description">Awarded for a user's first entry.</span>
    </div>
    <div class="badge">
      <span class="badge-icon">📈</span>
      <span class="badge-title">Pace Setter</span>
      <span class="badge-description">Achieve the highest score in 24 hours.</span>
    </div>
    <div class="badge">
      <span class="badge-icon">🗓️</span>
      <span class="badge-title">Consistent Speaker</span>
      <span class="badge-description">Log a score 3 days in a row.</span>
    </div>
    <div class="badge">
      <span class="badge-icon">🎯</span>
      <span class="badge-title">Dedicated Participant</span>
      <span class="badge-description">Awarded after logging 10 scores.</span>
    </div>
  </div>
</div>